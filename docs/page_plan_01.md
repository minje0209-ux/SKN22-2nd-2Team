# 📊 KKBox 구독 이탈 관리 시스템 - Streamlit 페이지 명세서

## 📄 Page 1. Project Overview (데이터 및 도메인 개요)
**목적**: 분석 데이터의 신뢰성을 확보하고 프로젝트의 물리적 경계를 명확히 정의

### 1.1 데이터 바운더리 (Data Boundary)
* **기준 시점(T)**: 2017-04-01
* **행동 로그(User Logs)**: 2017-03-01 ~ 2017-03-31 (T 기준 과거 30일 단기 집중 분석)
* **거래 이력(Transactions)**: 가입 시점부터 T까지의 전체 이력 (Payment Context 확보)
* **이탈 정의**: 구독 만료 후 30일 이내에 재결제가 발생하지 않은 상태

### 1.2 데이터 스키마 및 파생 지표 (Feature Specification)
| 구분 | 지표명 | 계산식 (Logic) | 비즈니스 의미 |
| :--- | :--- | :--- | :--- |
| **행동** | `active_decay_rate` | $Count(Days_{W7}) / (Count(Days_{W30}) / 4.2)$ | 한 달 평균 대비 최근 1주 활동 급감 여부 |
| **행동** | `listening_velocity` | $Avg(Secs_{W1}) - Avg(Secs_{W2})$ | 최근 2주간의 청취 가속도 (감소 추세 포착) |
| **행동** | `skip_passion_index` | $Sum(Num_{25}) / Sum(Num_{100})$ | 완청 대비 스킵 비율 (서비스 만족도 하락 징후) |
| **성향** | `subscription_months` | $Total\_Payment\_Count \times Plan\_Days$ | 유저의 실질적인 서비스 충성도 기간 |
| **환경** | `last_payment_method`| $Categorical(Payment\_Method\_Id)$ | 결제 수단에 따른 태생적 이탈 위험도 |

---

## 📈 Page 2. Risk Matrix Dashboard (고객 위험도 분포)
**목적**: 30일간의 행동 변화와 과거 이력을 결합하여 유저의 현재 위치를 시각화

### 2.1 4분면 위험도 매트릭스 (4-Quadrant Analysis)
* **X축 (행동 점수 - V5.2)**: 30일간의 접속 빈도 및 청취 시간 감소율 기반 (마음의 변화)
* **Y축 (이력 점수 - V4)**: 결제 수단, 구독 기간, 과거 해지 이력 기반 (환경적 불안정성)

### 2.2 그룹 세그먼트 정의
1.  **안전 지대 (Safe)**: 활동 왕성, 결제 안정 $\rightarrow$ **유지(Keep)** 및 팬덤 관리
2.  **주의 지대 (Watch-out)**: 결제는 유지 중이나 활동 급감 $\rightarrow$ **콘텐츠 푸시** (권태기 유저)
3.  **경고 지대 (Warning)**: 활동은 있으나 결제 수단/이력이 불안 $\rightarrow$ **결제 수단 업데이트 유도**
4.  **위험 지대 (Danger)**: 활동 전무, 이탈 징후 뚜렷 $\rightarrow$ **강력한 프로모션** (이별 직전)

---

## 🎮 Page 3. Marketing Simulator (타겟팅 및 시뮬레이션)
**목적**: 마케팅 범위를 직접 설정하고 그에 따른 타겟 위치와 전략을 즉시 도출

### 3.1 타겟 범위 시뮬레이터 (Targeting Slider)
* **UX 센스**: `상위 N% 위험군 설정` 슬라이더 조절 시, Page 2의 **분포도 차트 내 해당 점들이 실시간으로 강조(Highlight)**됨.
* **실시간 지표**:
    * 선택된 타겟 유저 수 (예: 1,240명)
    * 해당 그룹의 주된 분포 구역 (예: "주의 지대 유저가 70%입니다.")

### 3.2 맞춤형 마케팅 처방 (Action Plan)
* **선택된 타겟 위치 분석**: 시뮬레이션 데이터가 위치한 분포 구역에 따라 버튼 활성화
    * **Case A (주의 지대 중심)**: "최근 청취가 뜸해진 분들입니다. 신곡 추천 푸시를 추천합니다."
    * **Case B (위험 지대 중심)**: "이탈이 거의 확실시됩니다. 1개월 무료 쿠폰 발송이 필요합니다."
* **데이터 추출**: 설정한 범위의 유저 ID 리스트 CSV 다운로드 기능.

---

## 🛠 시스템적 특징 (Technical Highlights)
* **Two-Track 모델링**: 결과 중심의 **V4**와 행동 징후 중심의 **V5.2**를 결합하여 입체적 분석.
* **단기 집중 분석**: 데이터 제약(30일 로그)을 역으로 활용하여 **'이탈 직전 골든 타임'**의 미세 변화 포착.
* **비즈니스 친화적 UI**: 복잡한 머신러닝 지표를 **4분면 위치와 색상**으로 치환하여 해석 난이도 감소.